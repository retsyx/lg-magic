# –î—Ä–∞–π–≤–µ—Ä LG Magic Remote (MR20) –¥–ª—è Linux –∏ –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
**–Ø–∑—ã–∫:** [Englishüá¨üáß](README.md) | **–†—É—Å—Å–∫–∏–πüá∑üá∫**

![LG Magic Remote](images/lg_magic_remote.png)

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —è–¥—Ä–∞ Linux –∏ –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—É–ª—å—Ç–∞ LG Magic Remote (MR20 –∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö). –î—Ä–∞–π–≤–µ—Ä –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—É–ª—å—Ç–∞, –≤–∫–ª—é—á–∞—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫, –≥–∏—Ä–æ—Å–∫–æ–ø–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–æ–º (–∞—ç—Ä–æ–º—ã—à—å) –∏ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º IMU (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä –∏ –≥–∏—Ä–æ—Å–∫–æ–ø). –ü–∞–∫–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–∞–∫ –º–æ–¥—É–ª—å —è–¥—Ä–∞, —Ç–∞–∫ –∏ —É—Ç–∏–ª–∏—Ç—ã –Ω–∞ Python –¥–ª—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–π–ª—ã –º–æ–¥—É–ª—è —è–¥—Ä–∞

- **kernel/dkms.conf** - —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ DKMS –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –º–æ–¥—É–ª—è —è–¥—Ä–∞
- **kernel/lg_magic_main.c** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥—Ä–∞–π–≤–µ—Ä–∞ —è–¥—Ä–∞
- **kernel/lg_magic_airmouse.h** - –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π 
- **kernel/lg_magic_airmouse.c** - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∞—ç—Ä–æ–º—ã—à–∏
- **kernel/Makefile** - —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –¥–ª—è –º–æ–¥—É–ª—è —è–¥—Ä–∞
- **51-lgimu.rules** - –ø—Ä–∞–≤–∏–ª–æ udev –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º IMU –±–µ–∑ –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤ `/etc/udev/rules.d/` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Python

- **scripts/lg_magic.py** - –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–∞–∫–µ—Ç–æ–≤. –ò–∑–Ω–∞—á–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
- **scripts/calibrate.py** - –£—Ç–∏–ª–∏—Ç–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ IMU
- **scripts/convert_calib.py** - –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –º–æ–¥—É–ª—è —è–¥—Ä–∞
- **scripts/display_imu.py** - –£—Ç–∏–ª–∏—Ç–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ IMU –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –∏ —ç–º—É–ª—è—Ü–∏—è –∞—ç—Ä–æ–º—ã—à–∏

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª—è —è–¥—Ä–∞

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç LG Magic Remote (HID Bluetooth —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 000f:3412)
- –°–æ–∑–¥–∞–µ—Ç –¥–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤–≤–æ–¥–∞:
  - `LG Magic Remote` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HID —Å–æ–±—ã—Ç–∏—è (–∫–Ω–æ–ø–∫–∏, –∫–æ–ª–µ—Å–æ, –∞—ç—Ä–æ–º—ã—à—å)
  - `LG Magic Remote IMU` - —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ IMU (–∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä + –≥–∏—Ä–æ—Å–∫–æ–ø)

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–Ω–æ–ø–æ–∫ –≤–∫–ª—é—á–∞—è:
- –í–∫–ª—é—á–µ–Ω–∏–µ, —Ü–∏—Ñ—Ä–æ–≤—ã–µ –∫–ª–∞–≤–∏—à–∏ (0-9), –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (UP/DOWN/LEFT/RIGHT)
- –ú–µ–¥–∏–∞-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (PLAY, PAUSE, VOLUME, MUTE)
- –¶–≤–µ—Ç–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (RED, GREEN, YELLOW, BLUE)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ (HOME, BACK, SETTINGS, GUIDE)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞—ç—Ä–æ–º—ã—à–∏
**–¢—Ä–µ–±—É–µ—Ç –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–æ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–∏—Ä–æ—Å–∫–æ–ø–∞
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- –§–∏–ª—å—Ç—Ä –Ω–∏–∑–∫–∏—Ö —á–∞—Å—Ç–æ—Ç –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–æ—á–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –∞—ç—Ä–æ–º—ã—à—å—é

–§—É–Ω–∫—Ü–∏—è –∞—ç—Ä–æ–º—ã—à–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
- **–ú–æ–¥—É–ª—å —è–¥—Ä–∞ (–†–∞–±–æ—á–∏–π)**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—ç—Ä–æ–º—ã—à–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π, –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —è–¥—Ä–∞
- **Python + Uinput (–û—Ç–ª–∞–¥–æ—á–Ω—ã–π)**: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö IMU –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ —á–µ—Ä–µ–∑ `display_imu.py --mouse` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º IMU
- –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ –∏ –≥–∏—Ä–æ—Å–∫–æ–ø–∞ —á–µ—Ä–µ–∑ evdev
- 6-–æ—Å–µ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è (3 –æ—Å–∏ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ + 3 –æ—Å–∏ –≥–∏—Ä–æ—Å–∫–æ–ø–∞)
- –°—á–µ—Ç—á–∏–∫ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏

## –°–±–æ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ó–∞–≥–æ–ª–æ–≤–∫–∏ —è–¥—Ä–∞ Linux
- DKMS (Dynamic Kernel Module Support)
- –ë–∞–∑–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ (make, gcc)

### –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞
```bash
make
sudo insmod lg_magic.ko
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ DKMS
```bash
sudo mkdir /usr/src/lg-magic-1.0
sudo cp * /usr/src/lg-magic-1.0/
sudo dkms add -m lg-magic -v 1.0
sudo dkms build -m lg-magic -v 1.0
sudo dkms install -m lg-magic -v 1.0
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥—É–ª—è
–î—Ä–∞–π–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
sudo modprobe lg_magic airmouse=1 airmouse_threshold=300 imu_evdev=1 debug=2

# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ sysfs –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
echo 1 > /sys/module/lg_magic/parameters/airmouse
echo 500 > /sys/module/lg_magic/parameters/airmouse_threshold
echo 2 > /sys/module/lg_magic/parameters/debug
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `airmouse` (0/1): –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞—ç—Ä–æ–º—ã—à–∏
- `airmouse_threshold` (int): –ü–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∞—ç—Ä–æ–º—ã—à–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 300)
- `imu_evdev` (0/1): –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ IMU –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞
- `debug` (0-2): –£—Ä–æ–≤–µ–Ω—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (0=–±–µ–∑ —Å–æ–æ–±—â–µ–Ω–∏–π, 1=–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π, 2=–ø–æ–¥—Ä–æ–±–Ω—ã–π)

## –°–∏—Å—Ç–µ–º–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

### –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
–î—Ä–∞–π–≤–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏ –∏–∑ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –ø–æ–¥—Å–∏—Å—Ç–µ–º—É Linux Firmware:
- `lg_magic_calib_XX_XX_XX_XX_XX_XX.bin` - –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∫–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª –ø–æ MAC-–∞–¥—Ä–µ—Å—É
- `lg_magic_calib.bin` - –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

### –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏

1. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö IMU –¥–ª—è –æ–±–µ–∏—Ö –∫–∞–ª–∏–±—Ä–æ–≤–æ–∫:**
```bash
python3 display_imu.py --csv samples.csv
```

2. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∫–∞–ª–∏–±—Ä–æ–≤–æ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:**
```bash
# –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –∞–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä–∞ (–º–µ–¥–ª–µ–Ω–Ω–æ –≤—Ä–∞—â–∞–π—Ç–µ –ø–æ –≤—Å–µ–º –æ—Å—è–º –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)
python3 calibrate.py --accel samples.csv calib_accel.json

# –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≥–∏—Ä–æ—Å–∫–æ–ø–∞ (–¥–µ—Ä–∂–∏—Ç–µ –ø—É–ª—å—Ç –Ω–µ–ø–æ–¥–≤–∏–∂–Ω–æ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)
python3 calibrate.py --gyro samples.csv calib_gyro.json

# –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ JSON
–û–±—ä–µ–¥–∏–Ω–∏—Ç–µ —Ä–∞–∑–¥–µ–ª—ã gyro/accel. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≥–∏—Ä–æ—Å–∫–æ–ø–∞. –í—ã—Ö–æ–¥–∏—Ç –∑–∞ —Ä–∞–º–∫–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ–∫–æ–ª–æ 0.07
```

3. **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç:**
```bash
python3 convert_calib.py calib.json lg_magic_calib.bin --alpha 0.2 --mouse_k 0.5
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- `alpha`: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–∞ –Ω–∏–∑–∫–∏—Ö —á–∞—Å—Ç–æ—Ç (0.0-1.0)
- `mouse_k`: –ú–Ω–æ–∂–∏—Ç–µ–ª—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—ç—Ä–æ–º—ã—à–∏
- `gyro_bias`: –ó–Ω–∞—á–µ–Ω–∏—è –¥—Ä–µ–π—Ñ–∞ –≥–∏—Ä–æ—Å–∫–æ–ø–∞
- `gyro_scale`: –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≥–∏—Ä–æ—Å–∫–æ–ø–∞

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Python

### lg_magic.py - –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–∞–∫–µ—Ç–æ–≤
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ HIDRAW –ø–∞–∫–µ—Ç–æ–≤
python3 lg_magic.py
```

### display_imu.py - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è IMU
```bash
# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö IMU
python3 display_imu.py

# AHRS
python3 display_imu.py --calib calib.json --ahrs

# 3D –∫—É–±
python3 display_imu.py --calib calib.json --cube

# –ê—ç—Ä–æ–º—ã—à—å —á–µ—Ä–µ–∑ uinput
python3 display_imu.py --calib calib.json --mouse
```

### –û—Ç–ª–∞–¥–∫–∞ –∞—ç—Ä–æ–º—ã—à–∏
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Python –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º—ã—à–∏ –∏—Å–ø–æ–ª—å–∑—É—è uinput:

```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è uinput
sudo modprobe uinput

# –ó–∞–ø—É—Å–∫ –∞—ç—Ä–æ–º—ã—à–∏
python3 display_imu.py --calib calib.json --mouse
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HID –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

–ü—É–ª—å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç report ID `0xFD` (30 –±–∞–π—Ç –≤—Å–µ–≥–æ: 1 –±–∞–π—Ç report ID + 29 –±–∞–π—Ç –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏). –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:

| –°–º–µ—â–µ–Ω–∏–µ | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –§–æ—Ä–º–∞—Ç |
|----------|--------|----------|---------|
| 0 | 1 | Report ID (0xFD) | uint8_t |
| 1-2 | 2 | –°—á–µ—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤ | uint16 little-endian |
| 3-4 | 2 | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ (0xFD00) | uint16 little-endian |
| 5-6 | 2 | –ì–∏—Ä–æ—Å–∫–æ–ø X | int16 big-endian |
| 7-8 | 2 | –ì–∏—Ä–æ—Å–∫–æ–ø Y | int16 big-endian |
| 9-10 | 2 | –ì–∏—Ä–æ—Å–∫–æ–ø Z | int16 big-endian |
| 11-12 | 2 | –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä X | int16 big-endian |
| 13-14 | 2 | –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä Y | int16 big-endian |
| 15-16 | 2 | –ê–∫—Å–µ–ª–µ—Ä–æ–º–µ—Ç—Ä Z | int16 big-endian |
| 17-18 | 2 | –ö–æ–¥ –∫–Ω–æ–ø–∫–∏ | uint16 big-endian |
| 19 | 1 | –ö–æ–ª—ë—Å–∏–∫–æ | int8 |

–î—Ä—É–≥–∏–µ —Ç–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤ (0xF9, 0x01) –Ω–µ –Ω–∞–±–ª—é–¥–∞–ª–∏—Å—å, –≤–æ–∑–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞)

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö IMU
- **–ß–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏**: ~50Hz (–∏–Ω—Ç–µ—Ä–≤–∞–ª—ã 20ms)
- **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö**: 16-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è big-endian
- **–°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**: –ü–æ–∫–∞–∑–∞–Ω–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ

### –ê–ª–≥–æ—Ä–∏—Ç–º –∞—ç—Ä–æ–º—ã—à–∏
1. –î–∞–Ω–Ω—ã–µ –≥–∏—Ä–æ—Å–∫–æ–ø–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –¥—Ä–µ–π—Ñ—É –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è
2. –§–∏–ª—å—Ç—Ä –Ω–∏–∑–∫–∏—Ö —á–∞—Å—Ç–æ—Ç —É–º–µ–Ω—å—à–∞–µ—Ç –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã–π —à—É–º
3. –£–≥–ª–æ–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ –¥–≤–∏–∂–µ–Ω–∏–µ –∫—É—Ä—Å–æ—Ä–∞
4. –ü–æ—Ä–æ–≥–æ–≤–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∫–Ω–æ–ø–æ—á–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –∞—ç—Ä–æ–º—ã—à—å—é –ø–æ —É–≥–ª–æ–≤–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–æ–∫ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–Ω–æ–ø–æ—á–Ω—ã–π —Ä–µ–∂–∏–º.

## –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ

- **–ú–æ–¥—É–ª—å**: `/lib/modules/$(uname -r)/kernel/drivers/input/misc/lg_magic.ko`
- **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞**: `/lib/firmware/lg_magic_calib.bin`
- **–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ DKMS**: `/usr/src/lg-magic-1.0/`

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å**: LG Magic Remote MR20
- **–í–µ—Ä—Å–∏–∏ —è–¥—Ä–∞**: 4.15+ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å –Ω–∞ 6.11)
- **Python**: 3.6+
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: numpy, scipy, pyqtgraph, python-evdev

## –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∞–π—Ç–µ –æ–± –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ pull requests –¥–ª—è:
- –ü–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –£–ª—É—á—à–µ–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

GPL v2 - –¢–∞–∫–∞—è –∂–µ –∫–∞–∫ —É —è–¥—Ä–∞ Linux

Copyright ¬© 2025 [–ò–ª—å—è –ß–µ–ª—è–¥–∏–Ω]. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–µ –∞—Ñ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω —Å LG Electronics.
